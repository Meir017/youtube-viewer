{
  "title": "YouTube Viewer - Static Website",
  "version": "1.0.0",
  "description": "Add a static website version that serves channels.json directly without a backend server. The static site reuses the existing HTML/CSS and provides a read-only view of pre-generated channel data, deployable to any static host (GitHub Pages, Netlify, S3, etc.).",
  "created": "2026-02-08",
  "tasks": [
    {
      "id": "TASK-001",
      "title": "Create static site directory structure and build script",
      "requirements": [
        "Create a static-website/ directory at the project root",
        "Create a build script (website-tools/build-static.ts) that copies website/public/ files and channels.json into a self-contained static-website/dist/ output folder",
        "The build script should accept --output=<dir> to configure the output directory",
        "The build script should follow the CLI format of the enrich/refresh tools (colored header, progress, summary)",
        "Add a tools:build-static script to package.json",
        "The build output must be a fully self-contained directory (HTML, CSS, JS, data) that can be served by any static file server",
        "The default output directory (dist/static/) must be added to .gitignore"
      ],
      "dod": [
        "static-website/ directory exists with source files",
        "Running bun run tools:build-static produces a dist/static/ directory with all needed files",
        "The output directory contains index.html, styles.css, app.js, and data/channels.json",
        "package.json has a tools:build-static script",
        "dist/static/ is listed in .gitignore"
      ],
      "verification": [
        "Run bun run tools:build-static and verify the output directory is created",
        "Verify all required files exist in the output",
        "Serve the output with a simple static server (e.g., bunx serve dist/static) and verify it loads"
      ],
      "completed": true
    },
    {
      "id": "TASK-002",
      "title": "Create static-aware app.js that works without a backend",
      "requirements": [
        "Create static-website/app.js forked from website/public/app.js",
        "Replace all fetch() calls to /api/* with direct reads from a bundled channels.json file (loaded via fetch of a relative data/channels.json path)",
        "On startup, load data/channels.json and populate collections/channels/videos state directly",
        "Remove all write operations: add channel, delete channel, refresh channel, add/delete collection, rename collection, hide/unhide video, enrichment start",
        "Remove the enrichment panel UI and polling logic entirely",
        "Remove the add-channel form, add-collection button, delete buttons, refresh buttons, rename modals, and max-age Apply button",
        "Keep all read-only features: video grid with virtual scroll, search, sort, duration filter, channel tabs, shorts section, video player modal",
        "Replace /img/ and /avatar/ proxy URLs with direct YouTube thumbnail URLs (i.ytimg.com for thumbnails, yt3.ggpht.com for avatars stored in channel data)",
        "The app.js must work with zero backend API calls"
      ],
      "dod": [
        "static-website/app.js loads data from a local data/channels.json file",
        "No fetch calls to /api/ endpoints exist in the static app.js",
        "All read-only features (search, sort, filter, virtual scroll, video modal) work identically to the dynamic version",
        "Image URLs point directly to YouTube CDN instead of the proxy",
        "No UI elements for mutation operations (add, delete, refresh, enrich, hide) are present"
      ],
      "verification": [
        "Search static app.js for /api/ - should return no results",
        "Open the static site in a browser and verify videos display correctly",
        "Verify search, sort, and duration filters work",
        "Verify video player modal opens and plays videos",
        "Verify channel tab filtering works",
        "Verify thumbnail and avatar images load directly from YouTube CDN",
        "Open browser DevTools Network tab and confirm no failed API requests"
      ],
      "completed": true
    },
    {
      "id": "TASK-003",
      "title": "Create static index.html stripped of interactive elements",
      "requirements": [
        "Create static-website/index.html forked from website/public/index.html",
        "Remove the add-channel form (#addChannelSection)",
        "Remove the add-collection button (#addCollectionBtn) and its modal (#addCollectionModal)",
        "Remove the rename-collection modal (#renameCollectionModal)",
        "Remove the enrichment panel container from catalog filters",
        "Remove the max-age Apply button and input (the data is pre-generated)",
        "Remove the refresh button (#refreshAllBtn)",
        "Keep all read-only structural elements: header stats, collection tabs, channel tabs, video/shorts sections with search/sort/filter, video modal, loading overlay",
        "Reference the static app.js (not the dynamic one)",
        "Add a footer note indicating this is a static snapshot"
      ],
      "dod": [
        "static-website/index.html exists without any interactive mutation elements",
        "The HTML references the correct static app.js and styles.css",
        "All read-only structural elements are preserved",
        "A static snapshot indicator is visible in the footer"
      ],
      "verification": [
        "Open the static index.html and verify no add/delete/refresh/enrich buttons are visible",
        "Verify the collection tabs, channel tabs, video grid, and shorts section render correctly",
        "Verify the page title and header display properly"
      ],
      "completed": true
    },
    {
      "id": "TASK-004",
      "title": "Create or reuse styles.css for the static site",
      "requirements": [
        "Copy website/public/styles.css to static-website/styles.css",
        "Remove styles for elements that no longer exist (add-channel form, enrichment panel, refresh button, modals for add/rename)",
        "Optionally add a subtle style for the static snapshot footer indicator",
        "Ensure all read-only component styles are preserved (video cards, shorts cards, channel tabs, collection tabs, search, sort buttons, video modal, virtual scroll)"
      ],
      "dod": [
        "static-website/styles.css exists and contains only styles relevant to the static site",
        "No broken style references to removed elements",
        "The visual appearance of read-only components matches the dynamic site"
      ],
      "verification": [
        "Open the static site and compare visual appearance to the dynamic site",
        "Verify no CSS errors in browser DevTools console",
        "Verify responsive layout works at different viewport sizes"
      ],
      "completed": false
    },
    {
      "id": "TASK-005",
      "title": "Build script copies and assembles the static output",
      "requirements": [
        "The build-static.ts script should: load channels.json from website/data/channels.json, copy static-website/index.html, static-website/app.js, static-website/styles.css into the output directory, write channels.json into output/data/channels.json",
        "Support a --output flag for the output directory (default: dist/static)",
        "Validate that channels.json exists before building",
        "Print a summary of files written and total size",
        "Follow the CLI format pattern (colored header box, progress, summary footer)"
      ],
      "dod": [
        "website-tools/build-static.ts exists and produces a complete static site",
        "The output directory is self-contained and servable",
        "The build prints a clear summary of what was generated"
      ],
      "verification": [
        "Run bun run tools:build-static and verify output",
        "Serve output directory with any static server and verify full functionality",
        "Run bun run tools:build-static --help and verify help text"
      ],
      "completed": false
    },
    {
      "id": "TASK-006",
      "title": "Add unit tests for static site build script",
      "requirements": [
        "Add tests in tests/unit/build-static.test.ts",
        "Test that the build script correctly copies all required files",
        "Test that channels.json is embedded in the output",
        "Test the --help flag",
        "Test error handling when channels.json is missing"
      ],
      "dod": [
        "tests/unit/build-static.test.ts exists with passing tests",
        "Tests cover the main build script logic",
        "All existing tests continue to pass"
      ],
      "verification": [
        "Run bun test tests/unit/build-static.test.ts and verify all tests pass",
        "Run bun test to verify no regressions"
      ],
      "completed": false
    },
    {
      "id": "TASK-007",
      "title": "Update documentation",
      "requirements": [
        "Update README.md with a section about the static website",
        "Document how to generate the static site: 1) set up collections via bun run web, 2) run bun run tools:build-static, 3) deploy the output directory",
        "Document the tools:build-static CLI options",
        "Add AGENTS.md entry for the static-website directory"
      ],
      "dod": [
        "README.md includes static website documentation",
        "AGENTS.md references the static-website directory",
        "A user can follow the docs to generate and deploy a static site"
      ],
      "verification": [
        "Read the README static website section and verify it is clear and complete",
        "Follow the documented steps end-to-end on a fresh build"
      ],
      "completed": false
    }
  ]
}
