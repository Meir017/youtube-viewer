<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Channel Viewer</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- Header with Stats -->
        <header class="multi-channel-header">
            <h1 class="multi-channel-title">üì∫ YouTube Channel Viewer</h1>
            <div class="multi-channel-summary" id="summaryStats">
                <div class="summary-stat">
                    <div class="summary-stat-label">&#128193; Collections</div>
                    <div class="summary-stat-value" id="totalCollections">0</div>
                </div>
                <div class="summary-stat">
                    <div class="summary-stat-label">üì∫ Channels</div>
                    <div class="summary-stat-value" id="totalChannels">0</div>
                </div>
                <div class="summary-stat">
                    <div class="summary-stat-label">üé¨ Videos</div>
                    <div class="summary-stat-value" id="totalVideos">0</div>
                </div>
                <div class="summary-stat" id="shortsStatContainer" hidden>
                    <div class="summary-stat-label">üì± Shorts</div>
                    <div class="summary-stat-value" id="totalShorts">0</div>
                </div>
            </div>
            
            <!-- Collection Tabs (top level) -->
            <div class="collection-tabs-container">
                <div class="collection-tabs" id="collectionTabs">
                    <!-- Collection tabs will be rendered here -->
                </div>
                <button class="add-collection-btn" id="addCollectionBtn" title="Add new collection">+ New Collection</button>
            </div>

            <!-- Add Collection Modal -->
            <div id="addCollectionModal" class="modal" hidden>
                <div class="modal-content">
                    <h3>Create New Collection</h3>
                    <form id="addCollectionForm">
                        <input type="text" id="collectionNameInput" placeholder="Collection name (e.g., Tech, Music)" required>
                        <div class="modal-buttons">
                            <button type="button" class="cancel-btn" id="cancelCollectionBtn">Cancel</button>
                            <button type="submit" class="submit-btn">Create</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Rename Collection Modal -->
            <div id="renameCollectionModal" class="modal" hidden>
                <div class="modal-content">
                    <h3>Rename Collection</h3>
                    <form id="renameCollectionForm">
                        <input type="text" id="renameCollectionInput" placeholder="New collection name" required>
                        <input type="hidden" id="renameCollectionId">
                        <div class="modal-buttons">
                            <button type="button" class="cancel-btn" id="cancelRenameBtn">Cancel</button>
                            <button type="submit" class="submit-btn">Rename</button>
                        </div>
                    </form>
                </div>
            </div>
            
            <!-- Add Channel Form (shows when a collection is selected) -->
            <div class="add-channel-inline" id="addChannelSection" hidden>
                <form id="addChannelForm" class="add-form-inline">
                    <input 
                        type="text" 
                        id="channelInput" 
                        placeholder="Add channel (e.g., @GitHub)" 
                        autocomplete="off"
                        required
                    >
                    <button type="submit" id="addBtn">
                        <span class="btn-text">+ Add</span>
                        <span class="btn-loading" hidden>...</span>
                    </button>
                </form>
            </div>
            <div id="errorMessage" class="error-message" hidden></div>
            
            <!-- Catalog Filters -->
            <div class="catalog-filters" id="catalogFilters" hidden>
                <div class="filter-group">
                    <label for="maxAgeInput">üìÖ Max Age</label>
                    <input type="number" id="maxAgeInput" min="0" placeholder="30" value="30">
                    <span class="filter-unit">days</span>
                    <button id="applyMaxAgeBtn" class="apply-btn" title="Reload catalog with new max age">Apply</button>
                </div>
                <div class="filter-group">
                    <label for="minDurationInput">‚è±Ô∏è Min Duration</label>
                    <input type="number" id="minDurationInput" min="0" placeholder="0" value="0">
                    <span class="filter-unit">min</span>
                </div>
                <div class="filter-group">
                    <label for="maxDurationInput">‚è±Ô∏è Max Duration</label>
                    <input type="number" id="maxDurationInput" min="0" placeholder="‚àû">
                    <span class="filter-unit">min</span>
                </div>
            </div>
            
            <!-- Channel Tabs (within selected collection) -->
            <div class="channel-tabs-container" id="channelTabsContainer" hidden>
                <div class="channel-tabs" id="channelTabs">
                    <button class="channel-tab active" data-channel="all">
                        <span class="channel-dot"></span>
                        All Channels
                    </button>
                    <!-- Channel tabs will be rendered here -->
                </div>
            </div>
        </header>

        <!-- Videos Section -->
        <section class="videos-section" id="videosSection">
            <h2 class="section-title">
                üé¨ Videos
                <span class="section-count" id="videoCount">0</span>
            </h2>
            
            <div class="controls">
                <input type="text" class="search-box" placeholder="üîç Search videos..." id="searchBox">
                <button class="refresh-btn" id="refreshAllBtn" title="Refresh all videos to update views">
                    <span class="refresh-icon">üîÑ</span>
                    <span class="refresh-text">Refresh</span>
                </button>
                <div class="sort-buttons">
                    <button class="sort-btn active" data-sort="default" data-order="desc">
                        <span>Default</span>
                    </button>
                    <button class="sort-btn" data-sort="views" data-order="desc">
                        <span>üëÅÔ∏è Views</span>
                        <span class="sort-icon">‚ñº</span>
                    </button>
                    <button class="sort-btn" data-sort="date" data-order="desc">
                        <span>üìÖ Date</span>
                        <span class="sort-icon">‚ñº</span>
                    </button>
                    <button class="sort-btn" data-sort="duration" data-order="desc">
                        <span>‚è±Ô∏è Duration</span>
                        <span class="sort-icon">‚ñº</span>
                    </button>
                    <button class="sort-btn" data-sort="title" data-order="asc">
                        <span>üî§ Title</span>
                        <span class="sort-icon">‚ñ≤</span>
                    </button>
                </div>
            </div>
            
            <div class="videos-grid" id="videosGrid">
                <!-- Videos will be rendered here -->
            </div>
        </section>

        <!-- Shorts Section -->
        <section class="shorts-section" id="shortsSection" hidden>
            <h2 class="section-title">
                üì± Shorts
                <span class="section-count shorts" id="shortsCount">0</span>
            </h2>
            
            <div class="controls">
                <input type="text" class="search-box" placeholder="üîç Search shorts..." id="searchBoxShorts">
            </div>
            
            <div class="shorts-grid" id="shortsGrid">
                <!-- Shorts will be rendered here -->
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer" id="footer">
            <p>Data fetched from YouTube</p>
        </footer>

        <!-- Video Player Modal -->
        <div id="videoPlayerModal" class="video-modal" hidden>
            <div class="video-modal-backdrop"></div>
            <div class="video-modal-content">
                <button class="video-modal-close" id="closeVideoModal" title="Close (Esc)">‚úï</button>
                <div class="video-modal-player">
                    <iframe id="videoPlayerIframe" src="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
                </div>
                <div class="video-modal-info">
                    <h3 id="videoModalTitle"></h3>
                    <div class="video-modal-meta">
                        <span id="videoModalChannel"></span>
                        <span id="videoModalViews"></span>
                        <span id="videoModalDate"></span>
                    </div>
                    <a id="videoModalLink" href="" target="_blank" rel="noopener noreferrer" class="video-modal-youtube-link">Open in YouTube ‚Üó</a>
                </div>
            </div>
        </div>

        <!-- Loading Overlay -->
        <div id="loadingOverlay" class="loading-overlay" hidden>
            <div class="loading-spinner"></div>
            <p>Loading channels...</p>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
